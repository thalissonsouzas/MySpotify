{"ast":null,"code":"var _jsxFileName = \"/home/thalisson/trybe/projetos/frontend/sd-030-a-project-trybetunes (c\\xF3pia)/src/components/MusicsCard.jsx\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { addSong, getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport Carregando from './Carregando';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class MusicsCard extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      loading: false,\n      favorite: false\n    };\n    this.handleChecked = async () => {\n      const {\n        trackId\n      } = this.props;\n      const favoritesLocalStorage = await getFavoriteSongs();\n      if (favoritesLocalStorage) {\n        this.setState({\n          favorite: favoritesLocalStorage.some(track => track.trackId === trackId)\n        });\n      }\n    };\n    this.adicionarFavorito = async e => {\n      const {\n        trackName,\n        previewUrl,\n        trackId\n      } = this.props;\n      this.setState({\n        loading: true\n      });\n      const {\n        target: {\n          checked\n        }\n      } = e;\n      if (checked) {\n        await addSong({\n          trackName,\n          previewUrl,\n          trackId\n        });\n      } else {\n        await removeSong({\n          trackName,\n          previewUrl,\n          trackId\n        });\n      }\n      await this.handleChecked();\n      this.setState({\n        loading: false\n      });\n    };\n  }\n  componentDidMount() {\n    this.handleChecked();\n  }\n  render() {\n    const {\n      trackName,\n      previewUrl,\n      trackId\n    } = this.props;\n    const {\n      loading,\n      favorite\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"m-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"m-2\",\n        children: trackName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"audio\", {\n        \"data-testid\": \"audio-component\",\n        src: previewUrl,\n        controls: true,\n        children: [/*#__PURE__*/_jsxDEV(\"track\", {\n          kind: \"captions\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 11\n        }, this), \"O seu navegador n\\xE3o suporta o elemento\", /*#__PURE__*/_jsxDEV(\"code\", {\n          children: \"audio\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this), \".\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(Carregando, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 20\n      }, this) : /*#__PURE__*/_jsxDEV(\"label\", {\n        \"data-testid\": `checkbox-music-${trackId}`,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          onChange: this.adicionarFavorito,\n          checked: favorite,\n          className: \"border-b-2 border-blue-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 15\n        }, this), \"Favorita\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this);\n  }\n}\nMusicsCard.propTypes = {\n  trackName: PropTypes.string,\n  previewUrl: PropTypes.string\n}.isRequired;","map":{"version":3,"names":["React","Component","PropTypes","addSong","getFavoriteSongs","removeSong","Carregando","MusicsCard","state","loading","favorite","handleChecked","trackId","props","favoritesLocalStorage","setState","some","track","adicionarFavorito","e","trackName","previewUrl","target","checked","componentDidMount","render","propTypes","string","isRequired"],"sources":["/home/thalisson/trybe/projetos/frontend/sd-030-a-project-trybetunes (cópia)/src/components/MusicsCard.jsx"],"sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { addSong, getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport Carregando from './Carregando';\n\nexport default class MusicsCard extends Component {\n  state = ({\n    loading: false,\n    favorite: false,\n  });\n\n  componentDidMount() {\n    this.handleChecked();\n  }\n\n  handleChecked = async () => {\n    const { trackId } = this.props;\n    const favoritesLocalStorage = await getFavoriteSongs();\n    if (favoritesLocalStorage) {\n      this.setState({ favorite: favoritesLocalStorage\n        .some((track) => track.trackId === trackId),\n      });\n    }\n  };\n\n  adicionarFavorito = async (e) => {\n    const { trackName, previewUrl, trackId } = this.props;\n    this.setState({ loading: true });\n    const { target: { checked } } = e;\n    if (checked) {\n      await addSong({ trackName, previewUrl, trackId });\n    } else {\n      await removeSong({ trackName, previewUrl, trackId });\n    }\n    await this.handleChecked();\n    this.setState({ loading: false });\n  };\n\n  render() {\n    const { trackName, previewUrl, trackId } = this.props;\n    const { loading, favorite } = this.state;\n\n    return (\n      <div className='m-4'>\n        <h3 className='m-2'>{trackName}</h3>\n        <audio data-testid=\"audio-component\" src={ previewUrl } controls>\n          <track kind=\"captions\" />\n          O seu navegador não suporta o elemento\n          <code>audio</code>\n          .\n        </audio>\n        {loading ? <Carregando />\n          : (\n            <label data-testid={ `checkbox-music-${trackId}` }>\n              <input\n                type=\"checkbox\"\n                onChange={ this.adicionarFavorito }\n                checked={ favorite }\n                className='border-b-2 border-blue-500'\n                \n              />\n              Favorita\n            </label>)}\n\n      </div>\n    );\n  }\n}\n\nMusicsCard.propTypes = {\n  trackName: PropTypes.string,\n  previewUrl: PropTypes.string,\n}.isRequired;\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,QAAQ,OAAO;AACxC,OAAOC,SAAS,MAAM,YAAY;AAClC,SAASC,OAAO,EAAEC,gBAAgB,EAAEC,UAAU,QAAQ,8BAA8B;AACpF,OAAOC,UAAU,MAAM,cAAc;AAAC;AAEtC,eAAe,MAAMC,UAAU,SAASN,SAAS,CAAC;EAAA;IAAA;IAAA,KAChDO,KAAK,GAAI;MACPC,OAAO,EAAE,KAAK;MACdC,QAAQ,EAAE;IACZ,CAAC;IAAA,KAMDC,aAAa,GAAG,YAAY;MAC1B,MAAM;QAAEC;MAAQ,CAAC,GAAG,IAAI,CAACC,KAAK;MAC9B,MAAMC,qBAAqB,GAAG,MAAMV,gBAAgB,EAAE;MACtD,IAAIU,qBAAqB,EAAE;QACzB,IAAI,CAACC,QAAQ,CAAC;UAAEL,QAAQ,EAAEI,qBAAqB,CAC5CE,IAAI,CAAEC,KAAK,IAAKA,KAAK,CAACL,OAAO,KAAKA,OAAO;QAC5C,CAAC,CAAC;MACJ;IACF,CAAC;IAAA,KAEDM,iBAAiB,GAAG,MAAOC,CAAC,IAAK;MAC/B,MAAM;QAAEC,SAAS;QAAEC,UAAU;QAAET;MAAQ,CAAC,GAAG,IAAI,CAACC,KAAK;MACrD,IAAI,CAACE,QAAQ,CAAC;QAAEN,OAAO,EAAE;MAAK,CAAC,CAAC;MAChC,MAAM;QAAEa,MAAM,EAAE;UAAEC;QAAQ;MAAE,CAAC,GAAGJ,CAAC;MACjC,IAAII,OAAO,EAAE;QACX,MAAMpB,OAAO,CAAC;UAAEiB,SAAS;UAAEC,UAAU;UAAET;QAAQ,CAAC,CAAC;MACnD,CAAC,MAAM;QACL,MAAMP,UAAU,CAAC;UAAEe,SAAS;UAAEC,UAAU;UAAET;QAAQ,CAAC,CAAC;MACtD;MACA,MAAM,IAAI,CAACD,aAAa,EAAE;MAC1B,IAAI,CAACI,QAAQ,CAAC;QAAEN,OAAO,EAAE;MAAM,CAAC,CAAC;IACnC,CAAC;EAAA;EAzBDe,iBAAiB,GAAG;IAClB,IAAI,CAACb,aAAa,EAAE;EACtB;EAyBAc,MAAM,GAAG;IACP,MAAM;MAAEL,SAAS;MAAEC,UAAU;MAAET;IAAQ,CAAC,GAAG,IAAI,CAACC,KAAK;IACrD,MAAM;MAAEJ,OAAO;MAAEC;IAAS,CAAC,GAAG,IAAI,CAACF,KAAK;IAExC,oBACE;MAAK,SAAS,EAAC,KAAK;MAAA,wBAClB;QAAI,SAAS,EAAC,KAAK;QAAA,UAAEY;MAAS;QAAA;QAAA;QAAA;MAAA,QAAM,eACpC;QAAO,eAAY,iBAAiB;QAAC,GAAG,EAAGC,UAAY;QAAC,QAAQ;QAAA,wBAC9D;UAAO,IAAI,EAAC;QAAU;UAAA;UAAA;UAAA;QAAA,QAAG,6CAEzB;UAAA,UAAM;QAAK;UAAA;UAAA;UAAA;QAAA,QAAO,KAEpB;MAAA;QAAA;QAAA;QAAA;MAAA,QAAQ,EACPZ,OAAO,gBAAG,QAAC,UAAU;QAAA;QAAA;QAAA;MAAA,QAAG,gBAErB;QAAO,eAAe,kBAAiBG,OAAQ,EAAG;QAAA,wBAChD;UACE,IAAI,EAAC,UAAU;UACf,QAAQ,EAAG,IAAI,CAACM,iBAAmB;UACnC,OAAO,EAAGR,QAAU;UACpB,SAAS,EAAC;QAA4B;UAAA;UAAA;UAAA;QAAA,QAEtC,YAEJ;MAAA;QAAA;QAAA;QAAA;MAAA,QAAS;IAAA;MAAA;MAAA;MAAA;IAAA,QAET;EAEV;AACF;AAEAH,UAAU,CAACmB,SAAS,GAAG;EACrBN,SAAS,EAAElB,SAAS,CAACyB,MAAM;EAC3BN,UAAU,EAAEnB,SAAS,CAACyB;AACxB,CAAC,CAACC,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}